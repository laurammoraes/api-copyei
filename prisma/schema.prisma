generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id                String              @id @default(uuid())
  name              String              @db.VarChar(255)
  email             String
  password          String
  role              Roles               @default(USER)
  due_date          DateTime?
  description_plan  String?             @db.VarChar(255)
  updated_at        DateTime            @updatedAt
  deleted_at        DateTime?
  paused_at         DateTime?
  created_at        DateTime            @default(now())
  Domains           Domains[]
  Websites          Websites[]
  Logs              Loggers[]
  googleCredentials googleCredentials[]
}

model Domains {
  id      Int        @id @default(autoincrement())
  domain  String     @unique
  user_id String
  User    Users      @relation(fields: [user_id], references: [id])
  Website Websites[]
}

model Websites {
  id            Int          @id @default(autoincrement())
  title         String       @unique @db.VarChar(255)
  clone_url     String       @db.VarChar(255)
  status        Status       @default(ACTIVE)
  type          WebsitesType @default(LOCAL)
  driveFolderId String?
  created_at    DateTime     @default(now())

  domain_id Int
  Domain    Domains @relation(fields: [domain_id], references: [id])
  user_id   String
  User      Users   @relation(fields: [user_id], references: [id])
}

enum WebsitesType {
  LOCAL
  DRIVE
}

model Loggers {
  id            Int      @id @default(autoincrement())
  type          String
  function_name String
  user_id       String
  created_at    DateTime @default(now())

  User Users @relation(fields: [user_id], references: [id])
}

enum Roles {
  USER
  ADMIN
}

enum Status {
  ACTIVE
  CLONING
}

model googleCredentials {
  id            Int      @id @default(autoincrement())
  access_token  String
  refresh_token String
  expires_at    DateTime
  created_at    DateTime @default(now())

  user_id String @unique
  User    Users  @relation(fields: [user_id], references: [id])
}
